apiVersion: v1

kind: ConfigMap

metadata:
  name: homepage
  namespace: default
  labels:
    app.kubernetes.io/name: homepage

data:
  kubernetes.yaml: |
    mode: cluster

  settings.yaml: |
    title: nverk.me
    favicon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/svg/kubernetes.svg
    headerStyle: clean
    background:
      image: https://images.unsplash.com/photo-1475274047050-1d0c0975c63e?w=1920&q=80
      blur: md
      opacity: 75
      brightness: 50

    theme: dark
    color: slate
    disableCollapse: false
    showStats: false

    quicklaunch:
      searchDescriptions: true
      hideInternetSearch: false
      showSearchSuggestions: true
      hideVisitURL: false

    layout:
      Media:
        style: row
        columns: 2
        header: true
        icon: mdi-play-circle-outline

      Automation:
        style: row
        columns: 3
        header: true
        icon: mdi-robot-outline

      Downloads:
        style: row
        columns: 2
        header: true
        icon: mdi-download-circle-outline

      Infrastructure:
        style: row
        columns: 3
        header: true
        icon: mdi-server-network

  services.yaml: |
    - Media:
        - Jellyfin:
            icon: jellyfin.svg
            href: https://jellyfin.nverk.me
            description: Stream movies, TV shows & music
            siteMonitor: http://jellyfin-service.default.svc.cluster.local:8096
            widget:
              type: jellyfin
              url: http://jellyfin-service.default.svc.cluster.local:8096
              key: "{{HOMEPAGE_VAR_JELLYFIN_KEY}}"
              enableBlocks: true
              enableNowPlaying: true

        - Jellyseerr:
            icon: jellyseerr.svg
            href: https://jellyseerr.nverk.me
            description: Request new content
            siteMonitor: http://jellyseerr-service.default.svc.cluster.local:5055
            widget:
              type: jellyseerr
              url: http://jellyseerr-service.default.svc.cluster.local:5055
              key: "{{HOMEPAGE_VAR_JELLYSEERR_KEY}}"

    - Automation:
        - Radarr:
            icon: radarr.svg
            href: https://radarr.nverk.me
            description: Automated movie downloads
            siteMonitor: http://radarr-service.default.svc.cluster.local:7878
            widget:
              type: radarr
              url: http://radarr-service.default.svc.cluster.local:7878
              key: "{{HOMEPAGE_VAR_RADARR_KEY}}"
              enableQueue: true

        - Sonarr:
            icon: sonarr.svg
            href: https://sonarr.nverk.me
            description: Automated TV downloads
            siteMonitor: http://sonarr-service.default.svc.cluster.local:8989
            widget:
              type: sonarr
              url: http://sonarr-service.default.svc.cluster.local:8989
              key: "{{HOMEPAGE_VAR_SONARR_KEY}}"
              enableQueue: true

        - Prowlarr:
            icon: prowlarr.svg
            href: https://prowlarr.nverk.me
            description: Manage indexers & trackers
            siteMonitor: http://prowlarr-service.default.svc.cluster.local:9696
            widget:
              type: prowlarr
              url: http://prowlarr-service.default.svc.cluster.local:9696
              key: "{{HOMEPAGE_VAR_PROWLARR_KEY}}"

    - Downloads:
        - qBittorrent:
            icon: qbittorrent.svg
            href: https://torrent.nverk.me
            description: BitTorrent client
            siteMonitor: http://qbit-service.default.svc.cluster.local:8080
            widget:
              type: qbittorrent
              url: http://qbit-service.default.svc.cluster.local:8080
              username: nverk1997
              password: "{{HOMEPAGE_VAR_QBIT_PASSWORD}}"

        - FlareSolverr:
            icon: flaresolverr.svg
            href: http://flaresolverr.default.svc.cluster.local:8191
            description: Cloudflare bypass proxy
            siteMonitor: http://flaresolverr.default.svc.cluster.local:8191

    - Infrastructure:
        - ArgoCD:
            icon: argocd.svg
            href: https://argocd.nverk.me
            description: GitOps deployment platform
            siteMonitor: http://argocd-server.argocd.svc.cluster.local:80

        - Traefik:
            icon: traefik.svg
            href: https://traefik.nverk.me
            description: Ingress controller
            siteMonitor: http://traefik.traefik.svc.cluster.local:80

        - Cloudflare:
            icon: cloudflare.svg
            href: https://dash.cloudflare.com
            description: Zero Trust tunnel
            widget:
              type: cloudflared
              accountid: "{{HOMEPAGE_VAR_CLOUDFLARE_ACCOUNT_ID}}"
              tunnelid: "{{HOMEPAGE_VAR_CLOUDFLARE_TUNNEL_ID}}"
              key: "{{HOMEPAGE_VAR_CLOUDFLARE_TUNNEL_TOKEN_HOMEPAGE}}"

  widgets.yaml: |
    - logo:
        icon: https://cdn.jsdelivr.net/gh/walkxcode/dashboard-icons/svg/kubernetes.svg
        
    - greeting:
        text_size: 3xl
        text: Welcome Back

    - datetime:
        text_size: xl
        format:
          dateStyle: long
          timeStyle: short
          hourCycle: h12

    - search:
        provider: [google, duckduckgo, reddit, youtube]
        focus: true
        target: _blank

    - resources:
        label: Cluster Resources
        cpu: true
        memory: true
        cputemp: true
        uptime: true
        disk:
          - /
          - label: Storage
            path: /mnt/storage
        expanded: true
        refresh: 5000

  bookmarks.yaml: |
    - Development:
        - GitHub:
            - abbr: GH
              icon: github.svg
              href: https://github.com

        - Nix Packages:
            - abbr: NX
              icon: nixos.svg
              href: https://search.nixos.org/packages

    - Homelab:
        - Kubernetes Dashboard:
            - abbr: K8s
              icon: kubernetes.svg
              href: https://kubernetes.io/docs/

        - Homepage Docs:
            - abbr: HP
              icon: homepage.svg
              href: https://gethomepage.dev/

    - Quick Links:
        - Reddit:
            - abbr: RD
              icon: reddit.svg
              href: https://reddit.com/r/homelab

        - YouTube:
            - abbr: YT
              icon: youtube.svg
              href: https://youtube.com

  docker.yaml: ""
  custom.js: ""
